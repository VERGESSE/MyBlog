(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2513dc2"],{"6b88":function(e,t,n){"use strict";var i=n("d4a3"),r=n.n(i);r.a},"7b0e":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friends-container"},[n("div",{staticClass:"shadow"},[n("div",{staticStyle:{color:"#303133","font-size":"26px","text-align":"center","font-weight":"bolder","margin-bottom":"16px"}},[e._v(" 友情链接列表 ")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.friendInfos.list,border:""}},[n("el-table-column",{attrs:{label:"友链ID",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" ")]}}])}),n("el-table-column",{attrs:{label:"好友昵称","min-width":"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),n("el-table-column",{attrs:{label:"友链介绍","min-width":"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.detail)+" ")]}}])}),n("el-table-column",{attrs:{label:"友链地址","min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{staticStyle:{"font-size":"3px"},attrs:{type:"info",href:t.row.url,target:"_blank"}},[e._v(" "+e._s(t.row.url)+" ")])]}}])}),n("el-table-column",{attrs:{label:"好友头像","min-width":"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{staticStyle:{"font-size":"3px"},attrs:{type:"info",href:t.row.photo,target:"_blank"}},[e._v(" "+e._s(t.row.photo.split("/").slice(3).join("/"))+" ")])]}}])}),n("el-table-column",{attrs:{label:"创建时间","min-width":"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.createBy)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"info",round:""},on:{click:function(n){return e.friendEdit(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(n){return e.friendDelete(t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{staticClass:"pagination",attrs:{"hide-on-single-page":"","current-page":e.friendInfos.pageNum,"page-size":e.friendInfos.pageSize,layout:"prev, pager, next",total:e.friendInfos.total,"page-count":e.friendInfos.pages},on:{"update:currentPage":function(t){return e.$set(e.friendInfos,"pageNum",t)},"update:current-page":function(t){return e.$set(e.friendInfos,"pageNum",t)},"current-change":e.pageNumChange}}),n("el-dialog",{attrs:{title:"友链信息修改",visible:e.editFriend},on:{"update:visible":function(t){e.editFriend=t}}},[n("el-form",{ref:"updateFriend",attrs:{model:e.updateFriend,rules:e.rules}},[n("el-form-item",{attrs:{label:"好友昵称",prop:"name","label-width":"100px"}},[n("el-input",{attrs:{type:"text",maxlength:"50","show-word-limit":""},model:{value:e.updateFriend.name,callback:function(t){e.$set(e.updateFriend,"name",t)},expression:"updateFriend.name"}})],1),n("el-form-item",{attrs:{label:"友链介绍",prop:"detail","label-width":"100px"}},[n("el-input",{attrs:{type:"textarea",maxlength:"200","show-word-limit":""},model:{value:e.updateFriend.detail,callback:function(t){e.$set(e.updateFriend,"detail",t)},expression:"updateFriend.detail"}})],1),n("el-form-item",{attrs:{label:"友链地址",prop:"url","label-width":"100px"}},[n("el-input",{model:{value:e.updateFriend.url,callback:function(t){e.$set(e.updateFriend,"url",t)},expression:"updateFriend.url"}})],1),n("el-form-item",{attrs:{label:"好友头像",prop:"photo","label-width":"100px"}},[n("el-input",{model:{value:e.updateFriend.photo,callback:function(t){e.$set(e.updateFriend,"photo",t)},expression:"updateFriend.photo"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editFriend=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateOldFriend("updateFriend")}}},[e._v("确 定")])],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content shadow"},[n("el-form",{ref:"newFriend",attrs:{model:e.newFriend,rules:e.rules,"label-width":"100px"}},[n("span",{staticStyle:{color:"#909399","font-size":"23px","margin-left":"20px"}},[e._v("新增友链")]),n("el-divider",{staticStyle:{"margin-left":"20px"}}),n("el-form-item",{attrs:{label:"好友昵称",prop:"name"}},[n("el-input",{attrs:{type:"text",maxlength:"50","show-word-limit":""},model:{value:e.newFriend.name,callback:function(t){e.$set(e.newFriend,"name",t)},expression:"newFriend.name"}})],1),n("el-form-item",{attrs:{label:"友链介绍",prop:"detail"}},[n("el-input",{attrs:{type:"textarea",maxlength:"200","show-word-limit":""},model:{value:e.newFriend.detail,callback:function(t){e.$set(e.newFriend,"detail",t)},expression:"newFriend.detail"}})],1),n("el-form-item",{attrs:{label:"友链地址",prop:"url"}},[n("el-input",{model:{value:e.newFriend.url,callback:function(t){e.$set(e.newFriend,"url",t)},expression:"newFriend.url"}})],1),n("el-form-item",{attrs:{label:"好友头像",prop:"photo"}},[n("el-input",{model:{value:e.newFriend.photo,callback:function(t){e.$set(e.newFriend,"photo",t)},expression:"newFriend.photo"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.addFriend("newFriend")}}},[e._v("新增友链")]),n("el-button",{attrs:{type:"warning",round:""},on:{click:function(t){return e.resetForm("newFriend")}}},[e._v("重置")])],1)],1)],1)]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content shadow"},[n("span",{staticStyle:{color:"#909399","font-size":"23px","margin-left":"20px"}},[e._v("待审核")]),n("el-divider",{staticStyle:{"margin-left":"20px"}}),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.notCheckInfos.list,border:""}},[n("el-table-column",{attrs:{label:"好友昵称","min-width":"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),n("el-table-column",{attrs:{label:"友链介绍","min-width":"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.detail)+" ")]}}])}),n("el-table-column",{attrs:{label:"友链地址","min-width":"210",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{staticStyle:{"font-size":"3px"},attrs:{type:"info",href:t.row.url,target:"_blank"}},[e._v(" "+e._s(t.row.url)+" ")])]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"success",round:""},on:{click:function(n){return e.accessNewFriends(t.row)}}},[e._v("通过")]),n("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(n){return e.friendDelete(t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{staticClass:"pagination",attrs:{"hide-on-single-page":"","current-page":e.notCheckInfos.pageNum,"page-size":e.notCheckInfos.pageSize,layout:"prev, pager, next",total:e.notCheckInfos.total,"page-count":e.notCheckInfos.pages},on:{"update:currentPage":function(t){return e.$set(e.notCheckInfos,"pageNum",t)},"update:current-page":function(t){return e.$set(e.notCheckInfos,"pageNum",t)},"current-change":e.pageNumChange2}})],1)])],1)],1)},r=[],a=(n("fb6a"),n("b775"));function o(e){return Object(a["a"])({url:"/friend/friend-n",method:"post",data:e})}function l(){return Object(a["a"])({url:"/friend/friend",method:"get"})}function s(e){return Object(a["a"])({url:"/friend/friend",method:"put",data:e})}function u(e){return Object(a["a"])({url:"/friend/friend?id="+e,method:"delete"})}function d(){return Object(a["a"])({url:"/friend/friend-n",method:"get"})}var c={name:"Friends",data:function(){return{friendsList:null,friendInfos:{pageNum:1,pageSize:8,total:0,list:[]},notCheckList:null,notCheckInfos:{pageNum:1,pageSize:4,total:0,list:[]},newFriend:{id:"",name:"",detail:"",url:"",photo:"",createBy:""},updateFriend:{id:"",name:"",detail:"",url:"",photo:"",createBy:""},editFriend:!1,rules:{name:[{required:!0,message:"请输入好友昵称",trigger:"blur"}],detail:[{required:!0,message:"介绍不能为空",trigger:"blur"}],url:[{required:!0,message:"请输入正确URL",trigger:"blur"},{pattern:/^(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]$/,message:"必须为可访问网址！",trigger:"blur"}],photo:[{required:!0,message:"请输入正确URL",trigger:"blur"},{pattern:/^(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]$/,message:"必须为可访问网址！",trigger:"blur"}]}}},mounted:function(){this.getFriend(),this.getFriendNotCheck()},methods:{friendEdit:function(e){Object.assign(this.updateFriend,e),this.editFriend=!0},addFriend:function(e){var t=this;this.$refs[e].validate((function(n){if(!n)return!1;var i=t.newFriend;o(i).then((function(){t.$notify({title:"新建友链",message:"友链新增成功: "+i.url,type:"success",duration:3e3}),t.getFriend(),t.resetForm(e)})).catch((function(){t.$notify.error({title:"新建友链",message:"友链新增失败: "+i.url,duration:3e3}),t.resetForm(e)}))}))},updateOldFriend:function(e){var t=this;this.$refs[e].validate((function(n){if(!n)return!1;s(t.updateFriend).then((function(){t.$notify({title:"更新友链信息",message:"更新友链成功: "+t.updateFriend.url,type:"success",duration:3e3}),t.getFriend(),t.resetForm(e)})).catch((function(){t.$notify.error({title:"更新友链信息",message:"更新友链失败: "+t.updateFriend.url,duration:3e3}),t.resetForm(e)})),t.editFriend=!1}))},friendDelete:function(e){var t=this;this.$confirm("此操作将永久删除该友链, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u(e.id).then((function(){t.$notify({title:"删除友链",message:e.url+" 已删除",type:"success",duration:3e3}),t.getFriend(),t.getFriendNotCheck()}))}))},getFriendNotCheck:function(){var e=this;d().then((function(t){e.notCheckList=t,e.notCheckInfos.total=t.length;var n=e.notCheckInfos.pageSize;n>=t.length&&(n=t.length),e.notCheckInfos.list=e.notCheckList.slice(0,n),e.notCheckInfos.pageNum=1}))},getFriend:function(){var e=this;l().then((function(t){e.friendsList=t,e.friendsList.sort((function(e,t){return e.createBy>=t.createBy?-1:1})),e.friendInfos.total=t.length;var n=e.friendInfos.pageSize;n>=t.length&&(n=t.length),e.friendInfos.list=e.friendsList.slice(0,n),e.friendInfos.pageNum=1}))},accessNewFriends:function(e){var t=this;this.$confirm("是否通过此友链申请?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){e.state=1,s(e).then((function(){t.$notify({title:"通过友链成功",message:"地址: "+e.url,type:"success",duration:3e3}),t.getFriend(),t.getFriendNotCheck()}))}))},pageNumChange:function(){var e=this.friendInfos.pageSize,t=(this.friendInfos.pageNum-1)*e,n=this.friendInfos.pageNum*e;n>this.friendsList.length&&(n=this.friendsList.length),this.friendInfos.list=this.friendsList.slice(t,n),console.log(t,n)},pageNumChange2:function(){var e=this.notCheckInfos.pageSize,t=(this.notCheckInfos.pageNum-1)*e,n=this.notCheckInfos.pageNum*e;n>this.notCheckList.length&&(n=this.notCheckList.length),this.notCheckInfos.list=this.notCheckList.slice(t,n),console.log(t,n)},resetForm:function(e){this.$refs[e].resetFields()}}},f=c,p=(n("6b88"),n("2877")),h=Object(p["a"])(f,i,r,!1,null,"c71d9014",null);t["default"]=h.exports},d4a3:function(e,t,n){}}]);