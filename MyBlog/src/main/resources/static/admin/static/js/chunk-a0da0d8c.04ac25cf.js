(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a0da0d8c"],{"0c7e":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"picture-container shadow"},[i("el-row",[i("el-col",{attrs:{span:5}},[i("span",{staticStyle:{"font-size":"14px",color:"#606266","font-family":"'Helvetica Neue',Helvetica,'PingFang SC','Hiragino Sans GB','Microsoft YaHei','微软雅黑',Arial,sans-serif"}},[t._v(" 图片浏览： ")]),i("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getPictures},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.types,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-col",{attrs:{span:"5",offset:14}},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addPicByUrl}},[t._v(" 新增图片(链接) ")]),i("el-button",{attrs:{type:"primary",plain:""}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:"","auto-upload":!1,"show-file-list":!1,"on-change":t.changeUpload}},[t._v(" 新增图片(文件) ")])],1)],1)],1),i("el-dialog",{attrs:{title:"图片剪裁",visible:t.dialogVisible,"close-on-press-escape":!1,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"cropper-content"},[i("div",{staticClass:"cropper",staticStyle:{"text-align":"center"}},[i("vueCropper",{ref:"cropper",attrs:{img:t.option.img,outputSize:t.option.size,outputType:t.option.outputType,info:!0,canScale:t.option.canScale,autoCrop:t.option.autoCrop,autoCropWidth:t.option.autoCropWidth,autoCropHeight:t.option.autoCropHeight,fixedBox:t.option.fixedBox,fixed:t.option.fixed,fixedNumber:t.option.fixedNumber,canMove:t.option.canMove,canMoveBox:t.option.canMoveBox,original:t.option.original,centerBox:t.option.centerBox,infoTrue:t.option.infoTrue,full:t.option.full,enlarge:t.option.enlarge,mode:t.option.mode}})],1)]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.finish}},[t._v("确认")])],1)]),i("el-row",{staticStyle:{"margin-top":"6px"}},t._l(t.picturesInfo.list,(function(e){return i("el-col",{key:e,staticStyle:{padding:"5px"},attrs:{span:t.imgSetUp.slot}},[i("el-card",{attrs:{shadow:"hover","body-style":{padding:"10px"}}},[i("el-image",{style:{width:t.imgSetUp.width,height:t.imgSetUp.height},attrs:{src:e.pictureUrl,previewSrcList:"",fit:"cover"}}),i("div",{staticStyle:{padding:"8px"}},[i("div",{staticClass:"time"},[t._v(t._s(e.createBy))]),i("div",{staticClass:"bottom clearfix",attrs:{align:"right"}},[i("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){return t.gotoPic(e.pictureUrl)}}},[t._v(" 查看大图 ")]),i("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){return t.copyUrl(e.pictureUrl)}}},[t._v(" 复制链接 ")]),i("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){return t.deletePicture(e.id)}}},[t._v(" 删除 ")])],1)])],1)],1)})),1),i("el-pagination",{staticClass:"pagination",attrs:{"hide-on-single-page":"","current-page":t.picturesInfo.pageNum,"page-size":t.picturesInfo.pageSize,layout:"prev, pager, next",total:t.picturesInfo.total,"page-count":t.picturesInfo.pages},on:{"update:currentPage":function(e){return t.$set(t.picturesInfo,"pageNum",e)},"update:current-page":function(e){return t.$set(t.picturesInfo,"pageNum",e)},"current-change":t.getPictures}})],1)},n=[],a=(i("ace4"),i("d3b7"),i("ac1f"),i("3ca3"),i("466d"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("ddb0"),i("2b3d"),i("b775"));function r(t){return Object(a["a"])({url:"/picture/url",method:"post",params:t})}function c(t){return Object(a["a"])({url:"/picture/file",headers:{"Content-Type":"multipart/form-data"},method:"post",data:t})}function p(t){return Object(a["a"])({url:"/picture/picture?page="+t.pageNum+"&size="+t.pageSize+"&type="+t.type,method:"get"})}function s(t){return Object(a["a"])({url:"/picture/picture?id="+t,method:"delete"})}var l=i("7e79"),u={name:"Picture",components:{VueCropper:l["VueCropper"]},data:function(){return{type:1,types:[{label:"前台首页图片首页",value:0},{label:"文章题图",value:1},{label:"博客页头部图片",value:2},{label:"后台登录页图片",value:3}],picturesInfo:{pageNum:1,pageSize:12,total:0,list:[]},option:{img:"",outputSize:.5,outputType:"jpeg",info:!0,canScale:!0,autoCrop:!0,autoCropWidth:800,autoCropHeight:800,fixedBox:!0,fixed:!0,fixedNumber:[.65,1],canMove:!0,canMoveBox:!1,original:!1,centerBox:!0,infoTrue:!0,full:!1,enlarge:"1",mode:"contain"},loading:!1,dialogVisible:!1,imgSetUp:{slot:4,width:"300px",height:"400px"}}},created:function(){this.getPictures()},methods:{getPictures:function(){var t=this;0===this.type?this.imgSetUp={slot:4,width:"224px",height:"360px"}:1===this.type?this.imgSetUp={slot:6,width:"352px",height:"210px"}:2===this.type?this.imgSetUp={slot:8,width:"480px",height:"130px"}:3===this.type&&(this.imgSetUp={slot:6,width:"352px",height:"200px"}),this.picturesInfo.type=this.type,p(this.picturesInfo).then((function(e){t.picturesInfo=e}))},addPicByUrl:function(){var t=this;this.$prompt("请输入新的图片地址，记得宽高比正确哦",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(e){var i=e.value;r({type:t.type,url:i}).then((function(){t.$notify({title:"添加图片",message:"已添加: "+i,type:"success",duration:3e3}),t.getPictures()}))}))},deletePicture:function(t){var e=this;s(t).then((function(){e.$notify({title:"删除图片成功",type:"success",duration:3e3}),e.getPictures()}))},changeUpload:function(t){var e=this,i=t.size/1024/1024<20;if(!i)return this.$message.error("上传文件大小不能超过 20MB!"),!1;0===this.type?(this.option.fixedNumber=[.65,1],this.option.enlarge="3"):1===this.type?(this.option.fixedNumber=[1.5,1],this.option.enlarge="1.2"):2===this.type?(this.option.fixedNumber=[3.9,1],this.option.enlarge="2.5"):3===this.type&&(this.option.fixedNumber=[1.85,1],this.option.enlarge="3"),this.$nextTick((function(){e.option.img=URL.createObjectURL(t.raw),e.dialogVisible=!0}))},finish:function(){var t=this;this.$refs.cropper.getCropData((function(e){t.loading=!0;var i=new FormData;i.append("file",t.dataURLtoFile(e)),i.append("type",t.type),c(i).then((function(){t.loading=!1,t.dialogVisible=!1,t.$notify({title:"添加图片成功",type:"success",duration:3e3}),t.getPictures()}))}))},dataURLtoFile:function(t,e){var i=t.split(","),o=i[0].match(/:(.*?);/)[1],n=atob(i[1]),a=n.length,r=new Uint8Array(a);while(a--)r[a]=n.charCodeAt(a);return new File([r],e,{type:o})},gotoPic:function(t){window.open(t,"_blank")},copyUrl:function(t){var e=document.createElement("textarea");e.textContent=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(i){return!1}finally{document.body.removeChild(e)}this.$notify({title:"图片链接已复制到剪切板",type:"success",duration:3e3})},resetForm:function(t){this.$refs[t].resetFields()}}},d=u,f=(i("c575"),i("2877")),h=Object(f["a"])(d,o,n,!1,null,"6e9257d2",null);e["default"]=h.exports},c575:function(t,e,i){"use strict";var o=i("cfdc"),n=i.n(o);n.a},cfdc:function(t,e,i){}}]);