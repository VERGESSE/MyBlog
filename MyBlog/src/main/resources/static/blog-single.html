<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Ozod - Creative Portfolio Template">
        <meta name="keywords" content="Html, Css, jQuery, JavaScript, Ozod, responsive, onepage, personal, Portfolio, design, creative, template">

        <!-- Title -->
        <title th:text="${article.title} + ' - Vergessen'">Vergessen的博客</title>
        <!-- Favicon -->
        <link rel="icon" href="https://blog-vergessen.oss-cn-beijing.aliyuncs.com/blog/20200301212956.png">
        <!-- Google Fonts -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300,400,600,800">

        <!-- Font Awesome Css -->
        <!--<link rel="stylesheet" href="css/font-awesome.min.css">-->
        <link href="//libs.baidu.com/fontawesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
        <!-- Flaticon -->
        <link rel="stylesheet" href="fonts/flaticon.css">
        <!-- Bootstrap 4 Css -->
        <!--<link rel="stylesheet" href="css/bootstrap.min.css">-->
        <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">

        <!--引入Markdown转成的Html样式-->
        <link rel="stylesheet" href="css/prism.css">
        <link rel="stylesheet" href="css/markdown.css">
        <!--<link rel="stylesheet" href="/css/cobalt.css">-->

        <!-- Main Style Css -->
        <link rel="stylesheet" href="css/main.css">
		<!-- Inner Pages Style Css -->
        <link rel="stylesheet" href="css/inner-pages.css">
        <script src="js/pages/blog.js"></script>
        <!--[if lt IE 9]>
        <script src="https://cdn.bootcdn.net/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://cdn.bootcdn.net/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="js/pages/blog-single.js"></script>
        <style>
            canvas {
                position: fixed;
                width: 100%;
                z-index: -1000;
                overflow: hidden;
                opacity: revert;
                -ms-scroll-snap-x: revert;
                background-repeat:no-repeat;
                background-attachment:fixed;
            }
        </style>
        <script type="text/javascript">
            //添加评论
            function submitComment() {
                let name = $.trim($('#name').val());
                let email = $.trim($('#email').val());
                let content = $.trim($('#content').val());
                // 不为空才能增加
                if(name == '' || name == null || email == '' || email == null || content == '' || content == null){
                    alert("输入不能为空");
                    return;
                }
                // 不为空才能增加
                let sendMessage = {
                    name: name,
                    email: email,
                    content: content
                }
                let strs = window.location.href.split("/")
                let articleId = strs[strs.length - 1];
                $.ajax({
                    url: "../api/comment/add/" + articleId,
                    type: "POST",
                    dataType: "json",
                    contentType: "application/json;charset=utf-8",
                    data: JSON.stringify(sendMessage),
                    success: function () {
                        // 显示成功提示信息
                        alert("发送成功!");
                        window.location.replace("/blog-single/" + articleId);
                    },
                    error: function () {
                        alert("发送失败!");
                        window.location.replace("/blog-single/" + articleId);
                    }
                })
            }

        </script>

    </head>
    <body>

        <!-- ========== Start Loading ========== -->
        <div class="preloader">
            <div class="status">
                <div class="spinner">
                    <div class="dot1"></div>
                    <div class="dot2"></div>
                </div>
            </div>
        </div>

        <!-- ========== End Loading ========== -->

        <!-- ========== Start Page Title ========== -->
        <canvas id="canvas"></canvas>
        <div class="page-title" id="page-title">
		    <div class="overlay">
				<div class="container">
					<div class="content">
						<h2>Blog Single</h2>
						<ul class="list-unstyled">
                            <li><a href="../">Home</a></li>
                            <li class="two"><a href="../blog">Blog</a></li>
                            <li class="three"><a href="" th:href="@{'../blog/'+${article.categoryId}}" th:text="${article.categoryName}"></a></li>
                            <li th:text="${article.title}"></li>
						</ul>
					</div>
				</div>
			</div>
        </div>

        <!-- ========== End Page Title ========== -->

		<!-- ========== Start Blog single ========== -->


        <div class="blog" id="blog">
            <div class="container">
				<div class="row">
					<div class="col-lg-9 col-sm-12">
						<div class="blog-single">
							<div class="post">
								<div class="post-content" >
                                    <div class="post-title" >
                                        <a target="_blank"><h4 th:text="${article.title}" style="font-size: 22px;margin-top: 8px;"></h4></a>
                                    </div>
									<span class="post-date" th:text="${#temporals.format(article.modifiedBy, 'yyyy-MM-dd HH:mm:ss')}"></span>
                                    <span  style="color: #f9c828;text-align:right"> 浏览量<span th:text="${article.traffic}"></span> </span>

                                    <!--博文主体-->
                                    <div class="markdown-body" style="margin-top: 30px;" th:utext="${article.content}">

                                    </div>

									<div class="post-footer">

									</div>
									<div class="post-comments">
										<h3>评论</h3>
										<div class="post-comment" id="commentList">

									</div>
									<div class="post-form">
										<h3 id="comment">添加一条评论</h3>
										<form id="form">
											<div class="row">
												<div class="col-sm-6 col-xs-12">
													<div class="form-group">
														<input type="text" class="form-control" id="name" name="name" placeholder="Name" required>
													</div>
												</div>
												<div class="col-sm-6 col-xs-12">
													<div class="form-group">
														<input type="email" class="form-control" id="email" name="email" placeholder="Email" required>
													</div>
												</div>
												<div class="col-sm-12 col-xs-12">
													<div class="form-group">
														<textarea class="form-control" id="content" name="content" placeholder="Your Comment" required></textarea>
													</div>
												</div>
												<div class="col-sm-12 col-xs-12">
													<button class="main-btn" id="submit" type="button" onclick="submitComment()" name="comment">Submit</button>
												</div>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
                    </div>
					<div class="col-lg-3 col-sm-12 navigation">
						<div class="blog-sidebar">
							<div class="sidebar-search">
                                <div class="form-group">
                                    <input class="form-control" id="searchContent" name="search-field" placeholder="Search..." required="">
                                    <button class="search-btn" id="searchBtn" οnclick="onClick()"><i class="fa fa-search"></i></button>
                                </div>
							</div>
							<div class="sidebar-categories">
								<h4>分类</h4>
								<ul class="categories-list list-unstyled" id="categoryList">
                                    <li th:each="item,stat:${categorys}">
                                        <a href="#" th:href="@{'../blog/'+${item.id}}"
                                           th:utext="${item.name}+'<span>'+${item.number}+'</span>'"></a>
                                    </li>
								</ul>
							</div>
							<div class="sidebar-posts" id="articleLasted">
								<h4>最新博文</h4>
                                <div class="post-inner" th:each="item,stat:${articleList}">
                                    <div class="post-image">
                                        <a th:href="@{'/blog-single/'+${item.id}}">
                                            <img class="img-fluid" src="" th:src="@{${item.pictureUrl}}" href="#"alt/>
                                        </a>
                                    </div>
                                    <div class="post-info">
                                        <h5><a href="" th:href="@{'/blog-single/'+${item.id}}" th:text="${item.title}"></a></h5>
                                        <p th:href="@{'/blog-single/'+${item.id}}" th:text="${#temporals.format(item.createBy, 'yyyy-MM-dd HH:mm:ss')}"></p>
                                    </div>
                                </div>
							</div>

							<div class="sidebar-tags">

							</div>
						</div>
					</div>
				</div>
            </div>
            <div style="width: 100%;color: #dcbc8f;font-size: 10px;text-align: center; " >
                © 2020-2020 vergessen.top 版权所有 ICP证：
                <a href="http://beian.miit.gov.cn/" target="_blank" style="color: #f9c828">津ICP备19009700号</a>
            </div>
        </div>

        <!-- ========== End Blog single ========== -->

        <!-- ========== Js ========== -->
        <script src="js/bk.js"></script>
        <!-- jQuery -->
        <!--<script src="js/jquery-3.2.1.min.js"></script>-->
        <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <!-- Popper Js  -->
    	<!--<script src="js/popper.min.js"></script>-->
        <script src="https://cdn.bootcdn.net/ajax/libs/popper.js/2.4.2/cjs/popper.min.js"></script>
        <!-- Bootstrap 4 Js -->
        <!--<script src="js/bootstrap.min.js"></script>-->
        <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
        <!-- Custom Js -->
        <script src="js/custom.js"></script>
        <script src="js/pages/blog-single.js"></script>
    </body>
</html>
